{% extends "base.html" %}
{% block title %}AI Resume Analyzer – Smart CV Screening{% endblock %}

{% block content %}

<!-- ── Hero Section ──────────────────────────────────────────────────────── -->
<section class="hero">
  <div class="hero-content">
    <div class="hero-badge"><i class="fas fa-sparkles"></i> AI-Powered Analysis</div>
    <h1 class="hero-title">
      Analyze Your Resume<br/>
      <span class="gradient-text">With AI Intelligence</span>
    </h1>
    <p class="hero-subtitle">
      Upload your CV and paste a job description. Get an instant ATS compatibility
      score, keyword gap analysis, and personalised improvement suggestions.
    </p>
    <div class="hero-stats">
      <div class="stat-pill"><i class="fas fa-file-alt"></i> PDF &amp; DOCX</div>
      <div class="stat-pill"><i class="fas fa-bolt"></i> Instant Results</div>
      <div class="stat-pill"><i class="fas fa-shield-alt"></i> ATS Ready</div>
    </div>
  </div>
  <div class="hero-visual">
    <div class="floating-card card-1 glass-card">
      <i class="fas fa-check-circle text-green"></i>
      <span>Skills Matched</span>
    </div>
    <div class="floating-card card-2 glass-card">
      <i class="fas fa-chart-line text-aqua"></i>
      <span>Score: 92%</span>
    </div>
    <div class="floating-card card-3 glass-card">
      <i class="fas fa-robot text-pink"></i>
      <span>AI Suggestions</span>
    </div>
    <div class="hero-orb"></div>
  </div>
</section>

<!-- ── Upload Section ─────────────────────────────────────────────────────── -->
<section class="upload-section" id="upload">
  <div class="section-header">
    <h2>Start Your Analysis</h2>
    <p>Upload your resume and paste the job description below</p>
  </div>

  <form id="analysisForm" action="{{ url_for('upload') }}" method="POST" enctype="multipart/form-data">
    <div class="upload-grid">

      <!-- Left: File Upload -->
      <div class="upload-card glass-card">
        <div class="card-header">
          <i class="fas fa-cloud-upload-alt"></i>
          <h3>Upload Resume</h3>
        </div>

        <!-- Job Title -->
        <div class="form-group">
          <label for="job_title"><i class="fas fa-briefcase"></i> Job Title <span class="optional">(optional)</span></label>
          <input type="text" id="job_title" name="job_title"
                 placeholder="e.g. Senior Software Engineer"
                 class="input-field"/>
        </div>

        <!-- Drag & Drop Zone -->
        <div class="drop-zone" id="dropZone">
          <div class="drop-icon">
            <i class="fas fa-file-pdf"></i>
            <i class="fas fa-file-word"></i>
          </div>
          <p class="drop-title">Drag &amp; drop your resume here</p>
          <p class="drop-sub">or <span class="browse-link" id="browseBtn">browse files</span></p>
          <p class="drop-hint">Supported: PDF, DOCX · Max 10 MB</p>
          <input type="file" id="resumeInput" name="resume"
                 accept=".pdf,.docx,.doc" hidden required/>
        </div>

        <!-- File Preview -->
        <div class="file-preview hidden" id="filePreview">
          <div class="file-info">
            <i class="fas fa-file-alt file-icon"></i>
            <div class="file-meta">
              <span class="file-name" id="fileName">—</span>
              <span class="file-size" id="fileSize">—</span>
            </div>
            <button type="button" class="remove-file" id="removeFile" title="Remove">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="upload-progress">
            <div class="progress-bar-fill" id="uploadProgress"></div>
          </div>
        </div>
      </div>

      <!-- Right: Job Description -->
      <div class="upload-card glass-card">
        <div class="card-header">
          <i class="fas fa-clipboard-list"></i>
          <h3>Job Description</h3>
        </div>
        <div class="form-group" style="flex:1;display:flex;flex-direction:column;">
          <label for="job_description">
            <i class="fas fa-align-left"></i> Paste the full job description
          </label>
          <textarea id="job_description" name="job_description"
                    placeholder="Paste the job description here...&#10;&#10;Include: required skills, responsibilities, qualifications, etc."
                    class="textarea-field" required></textarea>
          <div class="jd-footer">
            <span class="char-count" id="charCount">0 characters</span>
            <span class="jd-tip"><i class="fas fa-lightbulb"></i> More detail = better analysis</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Analyze Button -->
    <div class="analyze-btn-wrap">
      <button type="submit" class="btn-analyze" id="analyzeBtn">
        <span class="btn-text">
          <i class="fas fa-brain"></i> Analyze Resume
        </span>
        <span class="btn-loading hidden">
          <i class="fas fa-spinner fa-spin"></i> Analyzing…
        </span>
      </button>
      <p class="analyze-note">Your file is processed securely and not stored permanently.</p>
    </div>
  </form>
</section>

<!-- ── Features Section ───────────────────────────────────────────────────── -->
<section class="features-section">
  <div class="section-header">
    <h2>What You Get</h2>
    <p>Comprehensive AI-driven insights to land your dream job</p>
  </div>
  <div class="features-grid">
    <div class="feature-card glass-card">
      <div class="feature-icon icon-aqua"><i class="fas fa-percentage"></i></div>
      <h3>Match Score</h3>
      <p>Weighted score combining keyword match, skills alignment, and formatting quality.</p>
    </div>
    <div class="feature-card glass-card">
      <div class="feature-icon icon-pink"><i class="fas fa-tags"></i></div>
      <h3>Keyword Analysis</h3>
      <p>TF-IDF powered matching identifies which important terms appear in your resume vs the JD.</p>
    </div>
    <div class="feature-card glass-card">
      <div class="feature-icon icon-aqua"><i class="fas fa-code"></i></div>
      <h3>Skills Gap</h3>
      <p>Detects 150+ technical and soft skills. Shows exactly what's missing from your profile.</p>
    </div>
    <div class="feature-card glass-card">
      <div class="feature-icon icon-pink"><i class="fas fa-robot"></i></div>
      <h3>AI Suggestions</h3>
      <p>Personalised, actionable recommendations to strengthen your application.</p>
    </div>
    <div class="feature-card glass-card">
      <div class="feature-icon icon-aqua"><i class="fas fa-check-double"></i></div>
      <h3>ATS Check</h3>
      <p>Flags formatting issues that prevent Applicant Tracking Systems from reading your CV.</p>
    </div>
    <div class="feature-card glass-card">
      <div class="feature-icon icon-pink"><i class="fas fa-download"></i></div>
      <h3>PDF Report</h3>
      <p>Download a professional analysis report to share with your career coach or recruiter.</p>
    </div>
  </div>
</section>

<!-- ── Loading Overlay ────────────────────────────────────────────────────── -->
<div class="loading-overlay hidden" id="loadingOverlay">
  <div class="loading-card glass-card">
    <div class="ai-pulse">
      <i class="fas fa-brain"></i>
    </div>
    <h3>Analyzing Your Resume…</h3>
    <div class="loading-steps">
      <div class="step active" id="step1"><i class="fas fa-file-import"></i> Parsing document</div>
      <div class="step" id="step2"><i class="fas fa-search"></i> Extracting keywords</div>
      <div class="step" id="step3"><i class="fas fa-cogs"></i> Running AI analysis</div>
      <div class="step" id="step4"><i class="fas fa-chart-bar"></i> Generating score</div>
    </div>
  </div>
</div>

{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/upload.js') }}"></script>
{% endblock %}
